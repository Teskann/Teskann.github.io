<!doctype html><html lang="en"><head><meta charset="utf-8"><title>URDFast Documentation - robots.py</title><meta name="author" content="Docapy"><link rel="stylesheet" href="style.css"></head><body><div class="navbar"><a href="index.html" class="titla"><span class="title"><span class="blue">URDFast</span> Documentation</span></a><span class="links"><a href="https://github.com/Teskann/URDFast">View Github</a><a href="https://github.com/Teskann/Docapy">About Docapy</a></span></div><h1>robots.py</h1><div class="sideMenu"><span class="browse">Browse Project Files</span><a href="code_generator.html" class="menua">code_generator.py</a><a href="code_optimization.html" class="menua">code_optimization.py</a><a href="dh_params.html" class="menua">dh_params.py</a><details class="menuDetails"><summary class="menuSummary">generated</summary><details class="menuDetails"><summary class="menuSummary">Examples</summary><a href="generated/Examples/test_robot.html" class="menua">test_robot.py</a></details></details><details class="menuDetails"><summary class="menuSummary">GUI</summary><details class="menuDetails"><summary class="menuSummary">Images</summary><a href="GUI/Images/source_rc.html" class="menua">source_rc.py</a></details><a href="GUI/info_dialog.html" class="menua">info_dialog.py</a><a href="GUI/main_gui.html" class="menua">main_gui.py</a><a href="GUI/main_window.html" class="menua">main_window.py</a><a href="GUI/source_rc.html" class="menua">source_rc.py</a></details><a href="joints.html" class="menua">joints.py</a><a href="Language.html" class="menua">Language.py</a><a href="links.html" class="menua">links.py</a><a href="polynomial_trajectory.html" class="menua">polynomial_trajectory.py</a><span class="blue"><a href="robots.html" class="menua">robots.py</a></span><a href="URDF.html" class="menua">URDF.py</a><a href="urdfast.html" class="menua">urdfast.py</a></div><div class="content"><h2>File Description</h2> Robot Objects<h2>Imports</h2><h3>From This Project</h3><ul><li><a href="./URDF.html" class="import">URDF</a></li><li><a href="./joints.html" class="import">joints</a></li><li><a href="./dh_params.html" class="import">dh_params</a></li><li><a href="./links.html" class="import">links</a></li></ul></ul><h3>External Packages</h3><ul><li><a href="https://pypi.org/project/anytree" class="import">anytree</a></li><li><a href="https://pypi.org/project/sympy" class="import">sympy</a></li></ul>If you don't have them, you can install these packages running <a href="https://pypi.org/project/pip/">pip</a> :<br><div class="code">$ <span class="blue">pip</span> install anytree<br></div><div class="code">$ <span class="blue">pip</span> install sympy<br></div><h2>Functions & Classes</h2><details><summary><span class="def">class</span> <span class="blue">Robot</span></summary><h3>Description</h3> Robot Class. Represents the tree representation of an URDF Robot. A robot is composed of joints and links<br><h3>Data Structure</h3> <b>name </b>: str<div class="indent"> Robot Name. If the robot has no name, it will be named &quot;no_name&quot;<br></div> <b>links </b>: List of links.Link<div class="indent"> List containing all the Links of the Robot.<br></div> <b>joints </b>: List of joints.Joint<div class="indent"> List containing all the Joints of the Robot.<br></div> <b>tree </b>: anytree.render.RenderTree<div class="indent"> Tree  representation of the Robot. Tree nodes names are formatted like <b>this </b>:<div class="indent"><ul><li> For Links<div class="indent"> link_k</div></li><li> For Joints<div class="indent"> joint_k</div> where k is the number of the Link/Joint in the list links/joints</li></ul><br></div></div> <b>mass </b>: float<div class="indent"> Mass of the robot<br></div> <b>saved_fk </b>: dict of dict of sympy.matrices.dense.MutableDenseMatrix<div class="indent"> Variable saving the forward kinematics that have already been computed before  to  save time if there is a need to compute it again. The keys of  the  first dict are the origins and the keys of the second are the destinations.<br></div> <b>saved_jac </b>: dict of dict of sympy.matrices.dense.MutableDenseMatrix<div class="indent"> Variable  saving  the jacobians that have already been computed before to  save  time if there is a need to compute it again. The keys of the first  dict  are  the  origins  and  the  keys  of  the second are the destinations.<br></div> <b>saved_com </b>: sympy.matrices.dense.MutableDenseMatrix or None<div class="indent"> Variable saving the center of mass expression of the robot.<br></div> <b>saved_com_jac </b>: sympy.matrices.dense.MutableDenseMatrix or None<div class="indent"> Variable saving the jacobian of the center of mass of the robot.<br></div> <b>dof </b>: list of sympy.core.symbol.Symbol<div class="indent"> List of all the degrees of freedom of the robot (alphabetical order)<br></div><h3>Methods</h3><details><summary><span class="def">def</span> <span class="blue">__init__</span>(self)</summary><h3>Description</h3> Constructor to call from children classes at the end of the creation</details><details><summary><span class="def">def</span> <span class="blue">nlinks</span>(self)</summary><h3>Description</h3> Returns the number of links of the Robot<br><h3>Returns</h3> <b>int </b>: Number of links of the Robot<br><h3>Examples</h3> TODO<br></details><details><summary><span class="def">def</span> <span class="blue">njoints</span>(self)</summary><h3>Description</h3> Returns the number of joints of the Robot<br><h3>Returns</h3> <b>int </b>: Number of joints of the robot<br><h3>Examples</h3> TODO<br></details><details><summary><span class="def">def</span> <span class="blue">branch</span>(self, origin, destination)</summary><h3>Description</h3> Returns  the  path  in  the  tree  to go from the &apos;origin&apos; node to the &apos;destination&apos; node.<br> <b>The result is returned as two lists </b>:<div class="indent"><ul><li> upwards is a list of joint numbers to go upward to</li><li> downwards is a list of joint numbers to go downward to</li></ul><br></div> Every element of the list is the index of a joint from self.joints<br> This  function  uses anytree Walker class, for more details, check the <b>anytree documentation </b>: <a href="https://anytree.readthedocs.io/en/latest/api/anytree.walker.html">https://anytree.readthedocs.io/en/latest/api/anytree.walker.html</a><br><h3>Parameters</h3> <b>origin </b>: str<div class="indent"> Origin  element  of the tree. Is a string formatted like the nodes <b>names of self.tree </b>:<div class="indent"> type_number<br> where type is &apos;joint&apos; / &apos;link&apos; and number is the number of the considered Joint / Link in self.joints / self.links.<br> <b>Example </b>: origin=&apos;joint_2&apos;</div></div> <b>destination </b>: str<div class="indent"> Destination  element  of  the tree. Is a string formatted like the <b>node names of self.tree </b>:<div class="indent"> type_number<br> where type is &apos;joint&apos; / &apos;link&apos; and number is the number of the considered Joint / Link in self.joints / self.links.<br> <b>Example </b>: destination=&apos;link_0&apos;<br></div></div><h3>Returns</h3> <b>upwards </b>: list of int<div class="indent"> List of  Joint index to go upward to. The transition matrix of the Joints is T()**(-1) to go from a Joint to the next in this list.</div> <b>downwards </b>: list of int<div class="indent"> List  Joint index to go downward  to. The transition matrix of the Joints is T() to go from a Joint to the next in this list<br></div><h3>Examples</h3> TODO<br></details><details><summary><span class="def">def</span> <span class="blue">forward_kinematics</span>(self, origin, destination, content="xyzo", optimization_level=0)</summary><h3>Description</h3> Computes  the  forward kinematics between the &apos;origin&apos; Joint / Link to the &apos;destination&apos; Joint / Link.<br> The result is returned as a Sympy Matrix in homogeneous coordinates.<br><h3>Parameters</h3> <b>origin </b>: str<div class="indent"> Origin  element  of the tree. Is a string formatted like the nodes <b>names of self.tree </b>:<div class="indent"> type_number<br> where type is &apos;joint&apos; / &apos;link&apos; and number is the number of the considered Joint / Link in self.joints / self.links.<br> <b>Example </b>: origin=&apos;joint_2&apos;</div></div> <b>destination </b>: str<div class="indent"> Destination  element  of  the tree. Is a string formatted like the <b>node names of self.tree </b>:<div class="indent"> type_number<br> where type is &apos;joint&apos; / &apos;link&apos; and number is the number of the considered Joint / Link in self.joints / self.links.<br> <b>Example </b>: destination=&apos;link_0&apos;<br></div></div> <b>content </b>: str<div class="indent"> Content of the FK (&quot;xyz&quot;, &quot;xyzo&quot;, &quot;o&quot;, ...)<br></div> <b>optimization_level </b>: int<div class="indent"> Optimization level of the generated code.<ul><li> <b>0 </b>: Numeric  computation  of  FK  using  the transition matrices functions (not applicable here)</li><li> <b>1 </b>: Computes  directly  the  FK  without  using  the  transition matrices functions, but the expression is not simplified</li><li> <b>2 </b>: Computes  directly  the  FK  without  using  the  transition matrices functions, and the expression is factored</li><li> <b>3 </b>: Computes  directly  the  FK  without  using  the  transition matrices  functions,  and the expression is simplified. This might take a long time to compute for only a few gains compared to 2.</li></ul><br></div><h3>Returns</h3> <b>T </b>: sympy.matrices.dense.MutableDenseMatrix<div class="indent"> Forward kinematics from origin to destination in homogeneous coordinates.<br> The shape of the matrix is (4x4)</div></details><details><summary><span class="def">def</span> <span class="blue">jacobian</span>(self, origin, destination, content="xyzrpY", optimization_level=1)</summary><h3>Description</h3> Returns the Geometric Jacobian between the origin and the destination.<br> <b>The Jacobian is given by the formula </b>:<br><div class="indent"><div class="indent"> /                             \ | dx/dDOF_0    ...    dx/dDOF_n | | dy/dDOF_0    ...    dy/dDOF_n |</div> J = | dz/dDOF_0    ...    dz/dDOF_n |<div class="indent"> | dr/dDOF_0    ...    dr/dDOF_n | | dp/dDOF_0    ...    dp/dDOF_n | | dY/dDOF_0    ...    dY/dDOF_n | \                             /<br></div></div> where  dx,  dy  and  dz  are  the  differentiation  of  the  cartesian coordinates of the destination frame in the origin frame,<br> dr/dDOF_k, dp/dDOF_k and dY/dDOF_k are the angular velocities,<br> dDOF_k is the differentiation of the kth degree of freedom encountered in  the  kinematics  chain  from  origin  to destination in alphabetic order,<br> N  is  the  total  number of DOF in the kinematic chain from origin to destination,<br> J is a 6xN matrix representing the Jacobian.<br> This  can  be  seen  as  the  Jacobian  of the position of the forward kinematics from origin to destination  (it&apos;s the ways it&apos;s computed).<br><br><h3>Parameters</h3> <b>origin </b>: str<div class="indent"> Origin  element  of the tree. Is a string formatted like the nodes <b>names of self.tree </b>:<div class="indent"> type_number<br> where type is &apos;joint&apos; / &apos;link&apos; and number is the number of the considered Joint / Link in self.joints / self.links.<br> <b>Example </b>: origin=&apos;joint_2&apos;</div></div> <b>destination </b>: str<div class="indent"> Destination  element  of  the tree. Is a string formatted like the <b>node names of self.tree </b>:<div class="indent"> type_number<br> where type is &apos;joint&apos; / &apos;link&apos; and number is the number of the considered Joint / Link in self.joints / self.links.<br> <b>Example </b>: destination=&apos;link_0&apos;<br></div></div> <b>content </b>: str<div class="indent"> Content of the Jacobian (&quot;xyzrpY&quot;, ...)<br></div> <b>optimization_level </b>: int<div class="indent"> 0 or 1 =&gt; The Jacobian is not simplified at all 2 =&gt; The Jacobian is factored 3 =&gt; The Jacobian is simplified<br></div><h3>Returns</h3> <b>J </b>: sympy.matrices.dense.MutableDenseMatrix<div class="indent"> Jacobian matrix between origin and destination<br></div> <b>list_symbols </b>: list of sympy.core.symbol.Symbol<div class="indent"> List of all the derivatives variables (DOF_k) (alphabetical order) The kth element of this list is the DOF_k of the Jacobian<br></div></details><details><summary><span class="def">def</span> <span class="blue">com</span>(self, optimization_level)</summary><h3>Description</h3> Computes the center of mass of the robot. Returned as a 3x1 vector.<br><h3>Parameters</h3> <b>optimization_level </b>: int<div class="indent"> 0 or 1 =&gt; The CoM is not simplified at all 2 =&gt; The CoM is factored 3 =&gt; The CoM is simplified<br></div><h3>Returns</h3> <b>com </b>: sympy.matrices.dense.MutableDenseMatrix<div class="indent"> Center of mass of the robot in the root (world) frame<br></div><h3>Raises</h3> <b>ValueError </b>: If the robot mass is null<h3>Nested Functions</h3><details><summary><span class="def">def</span> <span class="blue">recursive_com</span>(link, frame)</summary><h3>Description</h3> Recursive function to compute the center of mass<h3>Parameters</h3> <b>link </b>: links.Link<div class="indent"> Link from which you want to compute the center of mass.<br></div> <b>frame </b>: links.link<div class="indent"> Frame in which you want to express the CoM<br></div><h3>Returns</h3> <b>com </b>: sympy.matrices.dense.MutableDenseMatrix<div class="indent"> Jacobian matrix between origin and destination<br></div></details></details><details><summary><span class="def">def</span> <span class="blue">com_jacobian</span>(self, optimization_level)</summary><h3>Description</h3> Computes  the  jacobian  of  the  center  of  mass  (only position, no orientation).<br><h3>Parameters</h3> <b>optimization_level </b>: int<div class="indent"> 0 or 1 =&gt; The CoM Jacobian is not simplified at all 2 =&gt; The CoM Jacobian is factored 3 =&gt; The CoM Jacobian is simplified<br></div><h3>Returns</h3> <b>com_jac </b>: sympy.matrices.dense.MutableDenseMatrix<div class="indent"> Jacobian  of  the  center of mass of the robot in the root (world) frame.</div></details><details><summary><span class="def">def</span> <span class="blue">__str__</span>(self)</summary><h3>Description</h3> Converts the Robot object to a string The  string  is the tree representation which nodes are link and joint names. For  more  details  on  how  this  is  done,  check  out  the  anytree documentation : <a href="https://anytree.readthedocs.io/en/latest/">https://anytree.readthedocs.io/en/latest/</a><br><h3>Returns</h3> String tree representation of the robot<br></details></details><details><summary><span class="def">class</span> <span class="blue">RobotURDF</span>(Robot)</summary><h3>Description</h3> Robot for URDF files.<br> Only implements a constructor for URDF files. For more details, see Robot class<br><h3>Examples</h3> <b>You can create a robot from an URDF file using the parser </b>:<br><div class="code"> &gt;&gt;&gt;&nbsp;from&nbsp;URDF&nbsp;import&nbsp;URDF<br> &gt;&gt;&gt;&nbsp;urdf_obj&nbsp;=&nbsp;URDF(&quot;./Examples/example_0.urdf&quot;)<br> &gt;&gt;&gt;&nbsp;robot_obj&nbsp;=&nbsp;RobotURDF(urdf_obj)</div><br><h3>Methods</h3><details><summary><span class="def">def</span> <span class="blue">__init__</span>(self, urdf_object, progressbar=None)</summary><h3>Description</h3> Robot Constructor. You can construct a robot from an URDF Object.<br><h3>Parameters</h3> <b>urdf_object </b>: URDF.URDF<div class="indent"> URDF Object from the URDF library<br></div> <b>progressbar </b>: PyQt5.QtWidgets.QProgressBar or None, optional<div class="indent"><div class="indent"><div class="indent"> default is None</div></div> Progressbar to update during the robot creation (used in GUI) If it is None, no progressbar is updated<br></div><h3>Examples</h3><h3>Examples</h3> <b>You can create a robot from an URDF file using the parser </b>:<br><div class="code"> &gt;&gt;&gt;&nbsp;from&nbsp;URDF&nbsp;import&nbsp;URDF<br> &gt;&gt;&gt;&nbsp;urdf_obj&nbsp;=&nbsp;URDF(&quot;./Examples/example_0.urdf&quot;)<br> &gt;&gt;&gt;&nbsp;robot_obj&nbsp;=&nbsp;RobotURDF(urdf_obj)</div><br></details></details><details><summary><span class="def">class</span> <span class="blue">RobotDH</span>(Robot)</summary><h3>Description</h3> Robot for URDF files.<br> Only implements a constructor for URDF files. For more details, see Robot class<br><h3>Example</h3> <b>You can create a RobotDH from a .dhparams file using the parser </b>:<br><div class="code"> &gt;&gt;&gt;&nbsp;from&nbsp;dh_params&nbsp;import&nbsp;dh<br> &gt;&gt;&gt;&nbsp;dhparams_obj&nbsp;=&nbsp;dh(&quot;./Examples/example_0.dhparams&quot;)<br> &gt;&gt;&gt;&nbsp;robot_obj&nbsp;=&nbsp;RobotDH(dhparams_obj)</div><h3>Methods</h3><details><summary><span class="def">def</span> <span class="blue">__init__</span>(self, dhparams_object)</summary><h3>Description</h3> Construct a Robot from a DHParams object<br><h3>Parameters</h3> <b>dhparams_object </b>: dh_params.DHParams<div class="indent"> DHParams object of the robot you want to create<br></div><h3>Example</h3> <b>You can create a RobotDH from a .dhparams file using the parser </b>:<br><div class="code"> &gt;&gt;&gt;&nbsp;from&nbsp;dh_params&nbsp;import&nbsp;dh<br> &gt;&gt;&gt;&nbsp;dhparams_obj&nbsp;=&nbsp;dh(&quot;./Examples/example_0.dhparams&quot;)<br> &gt;&gt;&gt;&nbsp;robot_obj&nbsp;=&nbsp;RobotDH(dhparams_obj)</div></details></details></div></body></html>